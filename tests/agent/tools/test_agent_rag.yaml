# Test configuration for agent with RAG support
# This configuration is used by test_agent_rag.sh

agent:
  # Model configuration
  models:
    - model: "gpt-4o-mini"
      class: "openai"
      name: "openai"
      default: true
      api-key: "${OPENAI_API_KEY}"
      api-url: "${OPENAI_API_URL:-https://api.openai.com/v1}"

  # RAG configuration - test with local documents
  rag:
    # Product documentation RAG source
    product_docs:
      description: "MCPShell product information and documentation"
      
      # Local documents to index
      docs:
        - "./tests/agent/rag_docs/product_info.txt"
        - "./tests/agent/rag_docs/api_reference.txt"
      
      # Retrieval strategy
      strategies:
        - type: "chunked-embeddings"
          model: "text-embedding-3-small"
          chunking:
            size: 500
            overlap: 100
            respect_word_boundaries: true
          limit: 3
      
      # Result configuration
      results:
        limit: 5
        deduplicate: true
        include_score: false
        return_full_content: false

    # Security documentation RAG source
    security_docs:
      description: "MCPShell security guidelines and best practices"
      
      docs:
        - "./tests/agent/rag_docs/security_guide.txt"
      
      strategies:
        - type: "chunked-embeddings"
          model: "text-embedding-3-small"
          chunking:
            size: 400
            overlap: 80
          limit: 3
      
      results:
        limit: 3
        deduplicate: true
        include_score: false

# MCP tools configuration
prompts:
  system:
    - "You are a helpful assistant that can answer questions about MCPShell."
    - "Use the available RAG tools to retrieve relevant information from the documentation."
    - "Provide concise, accurate answers based on the retrieved information."

mcp:
  description: "Test tools for agent with RAG functionality"
  run:
    shell: "bash"
  tools:
    - name: "echo_test"
      description: "Simple echo tool for testing"
      params:
        message:
          description: "Message to echo"
          type: "string"
          required: true
      run:
        command: |
          echo "{{ .message }}"
      output:
        format: "text"

